(function(){"use strict";"undefined"==typeof JsEnv&&"function"==typeof require&&require("JsEnv").exportGlobally();var e=JsEnv.globalScope,t=e.window;if(e.setTimeout){var r=e.setTimeout;e.setTimeout=function(e,t){var n=this,o=Array.prototype.slice.call(arguments,2);return r(e instanceof Function?function(){e.apply(n,o)}:e,t)}}if(e.setInterval){var n=e.setInterval;e.setInterval=function(e,t){var r=this,o=Array.prototype.slice.call(arguments,2);return n(e instanceof Function?function(){e.apply(r,o)}:e,t)}}var o=function(){Object.defineProperty(this,"_valArray",{value:[],writable:!1,enumerable:!1,configurable:!1}),Object.defineProperty(this,"_queue",{value:[],writable:!1,enumerable:!1,configurable:!1}),Object.defineProperty(this,"_numToComplete",{value:0,writable:!0,enumerable:!1,configurable:!1}),Object.defineProperty(this,"_progress",{value:function(e,t){this._numToComplete-=1,this.progress&&this.progress(e),0>=this._numToComplete&&this.done&&this.done(this._valArray),t&&this._queue.length>0&&this.pop(t)},writable:!1,enumerable:!1,configurable:!1})};o.prototype={enqueue:function(e,t){t=t||{};var r=Array.prototype.slice.call(t.args||[]),n=this;return n._queue.push(function(o){if(t.callback_required)r.push(function(e){n._valArray.push(e),n._progress(e,o)}),t.fn.apply(e,r);else{var u=t.fn.apply(e,r);n._valArray.push(u),n._progress(u,o)}}),this._numToComplete+=1,this._queue.length},pop:function(e){setTimeout(this._queue.shift(),0,e)},start:function(e){if(e)this.pop(!0);else for(var t=this._queue.length;--t>=0;)this.pop()}},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=o),exports.asyncQueue=o):t?t.asyncQueue=o:this.asyncQueue=o}).call(this);